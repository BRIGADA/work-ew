CREATE TABLE alliance (id BIGINT, name text, desc text, active TINYINT(1), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE buildings (id BIGINT AUTO_INCREMENT, type text, width BIGINT, height BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE building_levels (building_id BIGINT, level BIGINT, time BIGINT, requirements text, stats text, PRIMARY KEY(building_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE chat (id BIGINT AUTO_INCREMENT, room text, message text, sender_id BIGINT, sender text, alliance_id BIGINT, alliance text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE defenses (id BIGINT AUTO_INCREMENT, type text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE defense_levels (defense_id BIGINT, level BIGINT, time BIGINT, requirements text, stats text, PRIMARY KEY(defense_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE equipment (id BIGINT AUTO_INCREMENT, type text NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE equipment_level (equipment_id BIGINT, level BIGINT, tier BIGINT, time BIGINT, upgrade_chance BIGINT, require_g BIGINT, require_e BIGINT, require_u BIGINT, require_c BIGINT, require_s BIGINT, stat_hp BIGINT, stat_range BIGINT, stat_rate BIGINT, stat_damage BIGINT, stat_targets BIGINT, stat_splash BIGINT, stat_concussion TINYINT(1), stat_defense FLOAT(18, 2), tags text, PRIMARY KEY(equipment_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE garrison_boosts (id BIGINT AUTO_INCREMENT, type text, value FLOAT(18, 2), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE generals (id BIGINT AUTO_INCREMENT, type text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE general_levels (general_id BIGINT, level BIGINT, requirements text, stats text, PRIMARY KEY(general_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE map_rewards (id BIGINT AUTO_INCREMENT, value BIGINT, rewards text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE player (id BIGINT, name text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE player_history (id BIGINT AUTO_INCREMENT, player_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE proxy (id BIGINT AUTO_INCREMENT, type text, params text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE skills (id BIGINT AUTO_INCREMENT, type text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE skill_levels (skill_id BIGINT, level BIGINT, requirements text, stats text, PRIMARY KEY(skill_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE translation (id VARCHAR(255), lang VARCHAR(2), content text, PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE units (id BIGINT AUTO_INCREMENT, type text, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE unit_levels (unit_id BIGINT, level BIGINT, requirements text, stats text, PRIMARY KEY(unit_id, level)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
ALTER TABLE building_levels ADD CONSTRAINT building_levels_building_id_buildings_id FOREIGN KEY (building_id) REFERENCES buildings(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE defense_levels ADD CONSTRAINT defense_levels_defense_id_defenses_id FOREIGN KEY (defense_id) REFERENCES defenses(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE equipment_level ADD CONSTRAINT equipment_level_equipment_id_equipment_id FOREIGN KEY (equipment_id) REFERENCES equipment(id);
ALTER TABLE general_levels ADD CONSTRAINT general_levels_general_id_generals_id FOREIGN KEY (general_id) REFERENCES generals(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE skill_levels ADD CONSTRAINT skill_levels_skill_id_skills_id FOREIGN KEY (skill_id) REFERENCES skills(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE unit_levels ADD CONSTRAINT unit_levels_unit_id_units_id FOREIGN KEY (unit_id) REFERENCES units(id) ON UPDATE CASCADE ON DELETE CASCADE;
